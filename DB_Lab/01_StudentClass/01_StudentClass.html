<!DOCTYPE HTML>
<html lang="en-US" manifest="../manifest.appcache">
    
    <head>
        
        <meta charset="UTF-8">
        <title>Problem 1: Student Class | </title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 0.5.2">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    <meta name="author" content="fsmk">
    
    
    <link rel="next" href="../02_AirlineFlight/02_AirlineFlight.html" />
    
    
    <link rel="prev" href="../SYLLABUS.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../gitbook/style.css">


        
    <div class="book" data-github="fsmk/CS-VTU-Lab-Manual" data-level="7" data-basepath=".." data-revision="1404290030481">
    <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    
    <a href="https://github.com/fsmk/CS-VTU-Lab-Manual" target="_blank" class="btn pull-left home-bookmark" aria-label="GitHub home"><i class="fa fa-bookmark-o"></i></a>
    
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="btn-group btn-block">
        <button id="reduce-font-size" class="btn btn-default">A</button>
        <button id="enlarge-font-size" class="btn btn-default">A</button>
    </div>

    <ul class="list-group font-family-list">
        <li class="list-group-item" data-font="0">Serif</li>
        <li class="list-group-item" data-font="1">Sans</li>
    </ul>

    <div class="btn-group btn-group-xs btn-block color-theme-list">
        <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
    </div>
</div>

    </span>

    <!-- Actions Right -->
    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    

    
    <a href="https://github.com/fsmk/CS-VTU-Lab-Manual/stargazers" target="_blank" class="btn pull-right count-star hidden-xs"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/fsmk/CS-VTU-Lab-Manual/watchers" target="_blank" class="btn pull-right count-watch hidden-xs"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1>
        <i class="fa fa-spinner fa-spin"></i>
        <a href="../" ></a>
    </h1>
</div>

    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        <li>
            <a href="https://github.com/fsmk" target="blank" class="author-link">About the author</a>
        </li>
        

        
        
        <li>
            <a href="https://github.com/fsmk/CS-VTU-Lab-Manual/issues" target="blank"class="issues-link">Questions and Issues</a>
        </li>
        

        
        
        <li>
            <a href="https://github.com/fsmk/CS-VTU-Lab-Manual/edit/master/01_StudentClass/01_StudentClass.md" target="blank" class="contribute-link">Edit and Contribute</a>
        </li>
        

        
        <li class="divider"></li>
        

        <li data-level="0" data-path="index.html">
            <a href="../"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
    
        <li class="chapter " data-level="1" data-path="Content.html">
            
            <a href="../Content.html">
                <i class="fa fa-check"></i> <b>1.</b> Content
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="Foreword.html">
            
            <a href="../Foreword.html">
                <i class="fa fa-check"></i> <b>2.</b> Foreword
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="Contributors.html">
            
            <a href="../Contributors.html">
                <i class="fa fa-check"></i> <b>3.</b> Contributors
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="About.html">
            
            <a href="../About.html">
                <i class="fa fa-check"></i> <b>4.</b> About
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="5" data-path="00_Introduction_to_MySQL/Introduction_to_MySQL.html">
            
            <a href="../00_Introduction_to_MySQL/Introduction_to_MySQL.html">
                <i class="fa fa-check"></i> <b>5.</b> Introduction to MySQL
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="SYLLABUS.html">
            
            <a href="../SYLLABUS.html">
                <i class="fa fa-check"></i> <b>6.</b> Syllabus
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="01_StudentClass/01_StudentClass.html">
            
            <a href="../01_StudentClass/01_StudentClass.html">
                <i class="fa fa-check"></i> <b>7.</b> Problem 1: Student Class
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="02_AirlineFlight/02_AirlineFlight.html">
            
            <a href="../02_AirlineFlight/02_AirlineFlight.html">
                <i class="fa fa-check"></i> <b>8.</b> Problem 2: Airline Flight
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="9" data-path="03_StudentCoursesBooks/03_StudentCoursesBooks.html">
            
            <a href="../03_StudentCoursesBooks/03_StudentCoursesBooks.html">
                <i class="fa fa-check"></i> <b>9.</b> Problem 3: Student Course Books
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="10" data-path="04_BookDealer/04_BookDealer.html">
            
            <a href="../04_BookDealer/04_BookDealer.html">
                <i class="fa fa-check"></i> <b>10.</b> Problem 4: Book dealer
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="11" data-path="05_BankingEnterprise/05_BankingEnterprise.html">
            
            <a href="../05_BankingEnterprise/05_BankingEnterprise.html">
                <i class="fa fa-check"></i> <b>11.</b> Problem 5: Banking Enterprise
            </a>
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Generated using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 63.63636363636363%;min-width: 54.54545454545455%;"></div>
    </div>
    <div class="chapters">
    
        <a href="../index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="../Content.html" title="Content" class="chapter done new-chapter" data-progress="1" style="left: 9.090909090909092%;"></a>
    
        <a href="../Foreword.html" title="Foreword" class="chapter done new-chapter" data-progress="2" style="left: 18.181818181818183%;"></a>
    
        <a href="../Contributors.html" title="Contributors" class="chapter done new-chapter" data-progress="3" style="left: 27.272727272727273%;"></a>
    
        <a href="../About.html" title="About" class="chapter done new-chapter" data-progress="4" style="left: 36.36363636363637%;"></a>
    
        <a href="../00_Introduction_to_MySQL/Introduction_to_MySQL.html" title="Introduction to MySQL" class="chapter done new-chapter" data-progress="5" style="left: 45.45454545454545%;"></a>
    
        <a href="../SYLLABUS.html" title="Syllabus" class="chapter done new-chapter" data-progress="6" style="left: 54.54545454545455%;"></a>
    
        <a href="../01_StudentClass/01_StudentClass.html" title="Problem 1: Student Class" class="chapter done new-chapter" data-progress="7" style="left: 63.63636363636363%;"></a>
    
        <a href="../02_AirlineFlight/02_AirlineFlight.html" title="Problem 2: Airline Flight" class="chapter  new-chapter" data-progress="8" style="left: 72.72727272727273%;"></a>
    
        <a href="../03_StudentCoursesBooks/03_StudentCoursesBooks.html" title="Problem 3: Student Course Books" class="chapter  new-chapter" data-progress="9" style="left: 81.81818181818181%;"></a>
    
        <a href="../04_BookDealer/04_BookDealer.html" title="Problem 4: Book dealer" class="chapter  " data-progress="10" style="left: 90.9090909090909%;"></a>
    
        <a href="../05_BankingEnterprise/05_BankingEnterprise.html" title="Problem 5: Banking Enterprise" class="chapter  " data-progress="11" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_7">
                    
                        <h2 id="program-1">PROGRAM 1</h2>
<h3 id="description-">DESCRIPTION:</h3>
<p>The following relations keep track of students, their enrollment for classes along with faculty information.</p>
<ul>
<li>Student (snum: integer, sname: string, major: string, level: string, age: integer)</li>
<li>Class (name: string, meets at: string, room: string, d: integer)</li>
<li>Enrolled (snum: integer, cname: string)</li>
<li>Faculty (fid: integer, fname: string, deptid: integer)</li>
</ul>
<p>NOTE: The meaning of these relations is straight forward.For example, Enrolled has one record per student-class pair such that the student is
enrolled in the class. Level is a two character code with 4 different values (example: Junior: JR etc)</p>
<h3 id="queries-">Queries:</h3>
<p>Write the following queries in SQL. No duplicates should be printed in any of the answers.</p>
<ol>
<li><p>Find the names of all juniors (level=Jr) who are enrolled for class taught by professor Harshith.</p>
</li>
<li><p>Find the names of all classes that either meet in room128 or have 5 or more students enrolled.</p>
</li>
<li><p>Find the names of all students who are enrolled in two classes that meet at same time.</p>
</li>
<li><p>Find the names of faculty members who teach in every room in which some class is taught.</p>
</li>
<li><p>Find the names of the faculty members for whome the combined enrollment of the classes that they teach is less then five.</p>
</li>
</ol>
<h3 id="create-">Create:</h3>
<pre>mysql> create database student;
Query OK, 1 row affected (0.00 sec)</pre>

<pre>mysql> use flights;
Database changed

mysql> create table student(
    snum int,sname varchar(10),
    major varchar(2),
    level varchar(2),
    age int,primary key(snum));
Query OK, 0 rows affected (0.10 sec)

mysql> desc student;
+-------+-------------+------+-----+---------+-------+
| Field | Type        | Null | Key | Default | Extra |
+-------+-------------+------+-----+---------+-------+
| snum  | int(11)     | NO   | PRI | 0       |       |
| sname | varchar(10) | YES  |     | NULL    |       |
| major | varchar(2)  | YES  |     | NULL    |       |
| level | varchar(2)  | YES  |     | NULL    |       |
| age   | int(11)     | YES  |     | NULL    |       |
+-------+-------------+------+-----+---------+-------+
5 rows in set (0.01 sec)


mysql> create table faculty(
    fid int,fname varchar(20),
    deptid int,
    primary key(fid));
Query OK, 0 rows affected (0.08 sec)
mysql> desc faculty;
+--------+-------------+------+-----+---------+-------+
| Field  | Type        | Null | Key | Default | Extra |
+--------+-------------+------+-----+---------+-------+
| fid    | int(11)     | NO   | PRI | 0       |       |
| fname  | varchar(20) | YES  |     | NULL    |       |
| deptid | int(11)     | YES  |     | NULL    |       |
+--------+-------------+------+-----+---------+-------+
3 rows in set (0.00 sec)


mysql> create table class(
    cname varchar(20),
    metts_at varchar(10),
    room varchar(10),
    fid int,
    primary key(cname),
    foreign key(fid) references faculty(fid));
Query OK, 0 rows affected (0.09 sec)

mysql> desc class;
+----------+-------------+------+-----+---------+-------+
| Field    | Type        | Null | Key | Default | Extra |
+----------+-------------+------+-----+---------+-------+
| cname    | varchar(20) | NO   | PRI |         |       |
| meets_at | varchar(10) | YES  |     | NULL    |       |
| room     | varchar(10) | YES  |     | NULL    |       |
| fid      | int(11)     | YES  | MUL | NULL    |       |
+----------+-------------+------+-----+---------+-------+
4 rows in set (0.01 sec)



mysql> create table enrolled(
    snum int,
    cname varchar(20),
    primary key(snum,cname),
    foreign key(snum) references student(snum),
    foreign key(cname) references class(cname));
Query OK, 0 rows affected (0.12 sec)


mysql> desc enrolled;
+-------+-------------+------+-----+---------+-------+
| Field | Type        | Null | Key | Default | Extra |
+-------+-------------+------+-----+---------+-------+
| snum  | int(11)     | NO   | PRI | 0       |       |
| cname | varchar(20) | NO   | PRI |         |       |
+-------+-------------+------+-----+---------+-------+
2 rows in set (0.00 sec)</pre>

<h3 id="insertions-">INSERTIONS:</h3>
<pre>mysql> insert into student values
    -> (1,'jhon','CS','Sr',19),
    -> (2,'smith','CS','Jr',20),
    -> (3,'jacob','CV','Sr',20),
    -> (4,'tom','CS','Jr',20),
    -> (5,'sid','CS','Jr',20),
    -> (6,'harry','CS','Sr',21)
Query OK, 2 rows affected (0.04 sec)

mysql> select *from student;
+------+-------+-------+-------+------+
| snum | sname | major | level | age  |
+------+-------+-------+-------+------+
|    1 | jhon  | CS    | Sr    |   19 |
|    2 | smith | CS    | Jr    |   20 |
|    3 | jacob | CV    | Sr    |   20 |
|    4 | tom   | CS    | Jr    |   20 |
|    5 | sid   | CS    | Jr    |   20 |
|    6 | Harry | CS    | Sr    |   21 |
+------+-------+-------+-------+------+
6 rows in set (0.00 sec)


mysql> insert into faculty values
    ->(11,'Harshith',1000),
    ->(12,'Mohan',1000),
    ->(13,'Kumar',1001),
    ->(14,'Shobha',1002),
    ->(15,'Shan',1000);
Query OK, 1 row affected (0.03 sec)

mysql> select *from faculty;
+-----+----------+--------+
| fid | fname    | deptid |
+-----+----------+--------+
|  11 | Harshith |   1000 |
|  12 | Mohan    |   1000 |
|  13 | Kumar    |   1001 |
|  14 | Shobha   |   1002 |
|  15 | Shan     |   1000 |
+-----+----------+--------+
5 rows in set (0.00 sec)



mysql> insert into class values
    -> ('class1','noon','room1',14),
    -> ('class10','morning','room128',14),
    -> ('class2','morning','room2',12),
    -> ('class3','morning','room3',11),
    -> ('class4','evening','room4',14),
    -> ('class5','night','room3',15),
    -> ('class6','morning','room2',14),
    -> ('class7','morning','room3',14);
Query OK, 8 rows affected (0.05 sec)
Records: 8  Duplicates: 0  Warnings: 0

+---------+----------+---------+------+
| cname   | meets_at | room    | fid  |
+---------+----------+---------+------+
| class1  | noon     | room1   |   14 |
| class10 | morning  | room128 |   14 |
| class2  | morning  | room2   |   12 |
| class3  | morning  | room3   |   11 |
| class4  | evening  | room4   |   14 |
| class5  | night    | room3   |   15 |
| class6  | morning  | room2   |   14 |
| class7  | morning  | room3   |   14 |
+---------+----------+---------+------+
8 rows in set (0.00 sec)



mysql> insert into enrolled values
    -> (1,'class1'),
    -> (2,'class1'),
    -> (3,'class3'),
    -> (4,'class3'),
    -> (3,'class3'),
    -> (5,'class4');
    -> (1,'class5');
    -> (2,'class5');
    -> (3,'class5');
    -> (4,'class5');
    -> (5,'class5');
    -> (6,'class5');

Query OK, 12 rows affected (0.03 sec)


mysql> select *from enrolled;

+------+--------+
| snum | cname  |
+------+--------+
|    1 | class1 |
|    2 | class1 |
|    3 | class2 |
|    3 | class3 |
|    4 | class3 |
|    5 | class4 |
|    1 | class5 |
|    2 | class5 |
|    3 | class5 |
|    4 | class5 |
|    5 | class5 |
|    6 | class5 |
+------+--------+
12 rows in set (0.00 sec)</pre>

<h3 id="queries-">QUERIES:</h3>
<h3 id="query-1-find-the-names-of-all-juniors-level-jr-who-are-enrolled-for-class-taught-by-professor-harshith-">Query 1: Find the names of all juniors (level=Jr) who are enrolled for class taught by professor Harshith.</h3>
<pre>mysql> select distinct s.sname
    from student s,class c,faculty f,enrolled e
    where  s.snum=e.snum      and
           e.cname=c.cname    and
                  s.level='jr'       and
           f.fname='Harshith' and
           f.fid=c.fid;
+-------+
| sname |
+-------+
| tom   |
+-------+
1 row in set (0.00 sec)

Description : Query checks whether the students are enrolled for the class and the level of the students is 'Jr', then it extracts the name of the student who is enrolled for the class whose fid in table class correspomds to the fid of professor Harshith.</pre>


<h3 id="query-2-find-the-names-of-all-classes-that-either-meet-in-room128-or-have-5-or-more-students-enrolled-">Query 2: Find the names of all classes that either meet in room128 or have 5 or more students enrolled.</h3>
<pre>mysql> select distinct cname
    from class
    where room='room128'
    or
    cname in (select e.cname from enrolled e group by e.cname having count(*)>=5);
+---------+
| cname   |
+---------+
| class10 |
| class5  |
+---------+
2 rows in set (0.00 sec)

Description : Query results displays the class names that either have room number as room128 or it selects the cname from table enrolled and "group by e.cname having count(*)>=5" statement meaning that cname where number of students enrolled for that class is greater than or equal to five.</pre>


<h3 id="query-3-find-the-names-of-all-students-who-are-enrolled-in-two-classes-that-meet-at-same-time-">Query 3: Find the names of all students who are enrolled in two classes that meet at same time.</h3>
<pre>mysql> select distinct s.sname
    from student s
    where s.snum in (select e1.snum
                from enrolled e1,enrolled e2,class c1,class c2
                where e1.snum=e2.snum   and
                e1.cname<>e2.cname      and
                      e1.cname=c1.cname       and
                    e2.cname=c2.cname       and
                    c1.meets_at=c2.meets_at  );
+-------+
| sname |
+-------+
| jacob |
+-------+
1 row in set (0.00 sec)

Description : Outer part of the query extraxts the name of the students from table student. The inner part of the query fetches the snum of the student, the student is enrolled to two different classes c1.cname and c2.cname, these two classes meets at the name time.</pre>



<h3 id="query-4-find-the-names-of-faculty-members-who-teach-in-every-room-in-which-some-class-is-taught-">Query 4: Find the names of faculty members who teach in every room in which some class is taught.</h3>
<pre>mysql> select f.fname,f.fid from faculty f
         where f.fid in ( select fid from class
              group by fid having count(*)=(select count(distinct room) from class) );


+--------+-----+
| fname  | fid |
+--------+-----+
| Shobha |  14 |
+--------+-----+
1 row in set (0.00 sec)

Description : The outer part of the query fetches the name and id of the facuty from table faculty of the fid obtained from the inner query.The inner query fetches the fid that has count of number of rooms taught equal to the number of distinct rooms in which some class is taught.</pre>



<h3 id="query-5-find-the-names-of-the-faculty-members-for-whome-the-combined-enrollment-of-the-classes-that-they-teach-is-less-then-five-">Query 5: Find the names of the faculty members for whome the combined enrollment of the classes that they teach is less then five.</h3>
<pre>mysql>  select distinct f.fname
    from faculty f
    where f.fid in (  select c.fid
              from class c, enrolled e
              where c.cname = e.cname group by c.cname having count(c.cname)< 5 );</pre>
<pre>+----------+
| fname    |
+----------+
| Harshith |
| Mohan    |
| Shobha   |
+----------+
3 rows in set (0.01 sec)

Description : The outer query fetches the name of the faculty for fid obtained from the inner query . The inner query selects the fid from class for the class name cname that is enrolled and the statement "e.cname group by c.cname having count(c.cname) < 5" means that the classwhich has enrollment less than five will be selected.</pre>




                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="../SYLLABUS.html" class="navigation navigation-prev " aria-label="Previous page: Syllabus"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../02_AirlineFlight/02_AirlineFlight.html" class="navigation navigation-next " aria-label="Next page: Problem 2: Airline Flight"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
<script src="../gitbook/app.js"></script>

    
    <script src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
