<!DOCTYPE HTML>
<html lang="en-US" manifest="../manifest.appcache">
    
    <head>
        
        <meta charset="UTF-8">
        <title>Problem 5: Banking Enterprise | </title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 0.5.2">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    <meta name="author" content="fsmk">
    
    
    
    <link rel="prev" href="../04_BookDealer/04_BookDealer.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../gitbook/style.css">


        
    <div class="book" data-github="fsmk/CS-VTU-Lab-Manual" data-level="11" data-basepath=".." data-revision="1404290030481">
    <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    
    <a href="https://github.com/fsmk/CS-VTU-Lab-Manual" target="_blank" class="btn pull-left home-bookmark" aria-label="GitHub home"><i class="fa fa-bookmark-o"></i></a>
    
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="btn-group btn-block">
        <button id="reduce-font-size" class="btn btn-default">A</button>
        <button id="enlarge-font-size" class="btn btn-default">A</button>
    </div>

    <ul class="list-group font-family-list">
        <li class="list-group-item" data-font="0">Serif</li>
        <li class="list-group-item" data-font="1">Sans</li>
    </ul>

    <div class="btn-group btn-group-xs btn-block color-theme-list">
        <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
    </div>
</div>

    </span>

    <!-- Actions Right -->
    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    

    
    <a href="https://github.com/fsmk/CS-VTU-Lab-Manual/stargazers" target="_blank" class="btn pull-right count-star hidden-xs"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/fsmk/CS-VTU-Lab-Manual/watchers" target="_blank" class="btn pull-right count-watch hidden-xs"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1>
        <i class="fa fa-spinner fa-spin"></i>
        <a href="../" ></a>
    </h1>
</div>

    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        <li>
            <a href="https://github.com/fsmk" target="blank" class="author-link">About the author</a>
        </li>
        

        
        
        <li>
            <a href="https://github.com/fsmk/CS-VTU-Lab-Manual/issues" target="blank"class="issues-link">Questions and Issues</a>
        </li>
        

        
        
        <li>
            <a href="https://github.com/fsmk/CS-VTU-Lab-Manual/edit/master/05_BankingEnterprise/05_BankingEnterprise.md" target="blank" class="contribute-link">Edit and Contribute</a>
        </li>
        

        
        <li class="divider"></li>
        

        <li data-level="0" data-path="index.html">
            <a href="../"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
    
        <li class="chapter " data-level="1" data-path="Content.html">
            
            <a href="../Content.html">
                <i class="fa fa-check"></i> <b>1.</b> Content
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="Foreword.html">
            
            <a href="../Foreword.html">
                <i class="fa fa-check"></i> <b>2.</b> Foreword
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="Contributors.html">
            
            <a href="../Contributors.html">
                <i class="fa fa-check"></i> <b>3.</b> Contributors
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="About.html">
            
            <a href="../About.html">
                <i class="fa fa-check"></i> <b>4.</b> About
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="5" data-path="00_Introduction_to_MySQL/Introduction_to_MySQL.html">
            
            <a href="../00_Introduction_to_MySQL/Introduction_to_MySQL.html">
                <i class="fa fa-check"></i> <b>5.</b> Introduction to MySQL
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="SYLLABUS.html">
            
            <a href="../SYLLABUS.html">
                <i class="fa fa-check"></i> <b>6.</b> Syllabus
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="01_StudentClass/01_StudentClass.html">
            
            <a href="../01_StudentClass/01_StudentClass.html">
                <i class="fa fa-check"></i> <b>7.</b> Problem 1: Student Class
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="02_AirlineFlight/02_AirlineFlight.html">
            
            <a href="../02_AirlineFlight/02_AirlineFlight.html">
                <i class="fa fa-check"></i> <b>8.</b> Problem 2: Airline Flight
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="9" data-path="03_StudentCoursesBooks/03_StudentCoursesBooks.html">
            
            <a href="../03_StudentCoursesBooks/03_StudentCoursesBooks.html">
                <i class="fa fa-check"></i> <b>9.</b> Problem 3: Student Course Books
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="10" data-path="04_BookDealer/04_BookDealer.html">
            
            <a href="../04_BookDealer/04_BookDealer.html">
                <i class="fa fa-check"></i> <b>10.</b> Problem 4: Book dealer
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="11" data-path="05_BankingEnterprise/05_BankingEnterprise.html">
            
            <a href="../05_BankingEnterprise/05_BankingEnterprise.html">
                <i class="fa fa-check"></i> <b>11.</b> Problem 5: Banking Enterprise
            </a>
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Generated using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 100%;min-width: 90.9090909090909%;"></div>
    </div>
    <div class="chapters">
    
        <a href="../index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="../Content.html" title="Content" class="chapter done new-chapter" data-progress="1" style="left: 9.090909090909092%;"></a>
    
        <a href="../Foreword.html" title="Foreword" class="chapter done new-chapter" data-progress="2" style="left: 18.181818181818183%;"></a>
    
        <a href="../Contributors.html" title="Contributors" class="chapter done new-chapter" data-progress="3" style="left: 27.272727272727273%;"></a>
    
        <a href="../About.html" title="About" class="chapter done new-chapter" data-progress="4" style="left: 36.36363636363637%;"></a>
    
        <a href="../00_Introduction_to_MySQL/Introduction_to_MySQL.html" title="Introduction to MySQL" class="chapter done new-chapter" data-progress="5" style="left: 45.45454545454545%;"></a>
    
        <a href="../SYLLABUS.html" title="Syllabus" class="chapter done new-chapter" data-progress="6" style="left: 54.54545454545455%;"></a>
    
        <a href="../01_StudentClass/01_StudentClass.html" title="Problem 1: Student Class" class="chapter done new-chapter" data-progress="7" style="left: 63.63636363636363%;"></a>
    
        <a href="../02_AirlineFlight/02_AirlineFlight.html" title="Problem 2: Airline Flight" class="chapter done new-chapter" data-progress="8" style="left: 72.72727272727273%;"></a>
    
        <a href="../03_StudentCoursesBooks/03_StudentCoursesBooks.html" title="Problem 3: Student Course Books" class="chapter done new-chapter" data-progress="9" style="left: 81.81818181818181%;"></a>
    
        <a href="../04_BookDealer/04_BookDealer.html" title="Problem 4: Book dealer" class="chapter done " data-progress="10" style="left: 90.9090909090909%;"></a>
    
        <a href="../05_BankingEnterprise/05_BankingEnterprise.html" title="Problem 5: Banking Enterprise" class="chapter done " data-progress="11" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_11">
                    
                        <h2 id="program-5">PROGRAM 5</h2>
<h3 id="description-">DESCRIPTION:</h3>
<p>The following relations keep track of a banking enterprise.</p>
<ul>
<li>BRANCH(branch-name:string, branch-city:string, assets:real)</li>
<li>ACCOUNT(accno:int, branch-name:string, balance:real)</li>
<li>DEPOSITOR(customer-name:string, accno:int)</li>
<li>CUSTOMER(customer-name:string, customer-street:string, customer-city:string)</li>
<li>LOAN(loan-number:int, branch-name:string, amount:real)</li>
<li>BORROWER(customer-name:string, loan-number:int)</li>
</ul>
<h3 id="queries-">Queries:</h3>
<p>Write each of the following queries in SQL.</p>
<ol>
<li>Create the above tables by properly specifying the primary keys and the foreign keys</li>
<li>Enter at least five tuples for each relation.</li>
</ol>
<h3 id="create-">Create:</h3>
<pre>CREATE TABLE BRANCH
     ( branch_name VARCHAR(15),
       branch_city VARCHAR(15),
       assets NUMBER(10,2),
       PRIMARY KEY(branch_name)
     );

     CREATE TABLE ACCOUNT
     ( accno INTEGER(8),
       branch_name VARCHAR(15),
       balance NUMBER(10,2),
       PRIMARY KEY(accno),
       FOREIGN KEY(branch_name) REFERENCES BRANCH(branch_name)ON DELETE CASCADE
     );

    CREATE TABLE CUSTOMER
    ( customer_name VARCHAR(15),
      customer_street VARCHAR(15),
      customer_city VARCHAR(15),
      PRIMARY KEY(customer_name)
    );

    CREATE TABLE LOAN
    ( loan_number INTEGER(8),
      branc_hname VARCHAR(15),
      amount NUMBER(10,2),
      PRIMARY KEY(loan_number),
      FOREIGN KEY(branch_name) REFERENCES BRANCH(branch_name)
    );

    CREATE TABLE DEPOSITOR
    ( customer_name VARCHAR(15),
      accno INTEGER,
      PRIMARY KEY(customer_name, accno),
      FOREIGN KEY(customer_name) REFERENCES CUSTOMER(customer_name),
      FOREIGN KEY(accno) REFERENCES ACCOUNT(accno)
    );

    CREATE TABLE BORROWER
    ( customer_name  VARCHAR(15),
      loan_number INTEGER(8),
      PRIMARY KEY(customer_name, loan_number),
      FOREIGN KEY(customer_name) REFERENCES CUSTOMER(customer_name),
      FOREIGN KEY(loan_number) REFERENCES LOAN(loan_number)
    );
</pre>

<h3 id="insertions-">INSERTIONS:</h3>
<pre>mysql> insert into branch values
    ->         ("b1","c1",10000),
    ->         ("b2","c2",20000),
    ->         ("b3","c3",30000),
    ->         ("b4","c4",40000),
    ->         ("b5","c5",50000);
Query OK, 5 rows affected (0.06 sec)
Records: 5  Duplicates: 0  Warnings:0</pre>

<pre>mysql> select * from branch;

+-------------+-------------+--------+
| branch_name | branch_city | assets |
+-------------+-------------+--------+
| b1          | c1          |  10000 |
| b2          | c2          |  20000 |
| b3          | c3          |  30000 |
| b4          | c4          |  40000 |
| b5          | c5          |  50000 |
+-------------+-------------+--------+
5 rows in set (0.00 sec)</pre>


<pre>mysql> insert into account values
    ->         (12,"b1",3000),
    ->         (22,"b2",4000),
    ->         (32,"b3",5000),
    ->         (42,"b4",6000),
    ->         (52,"b5",7000);

Query OK, 5 rows affected (0.06 sec)
Records: 5  Duplicates: 0  Warnings: 0</pre>

<pre>mysql> select * from account;

+-------+-------------+---------+
| accno | branch_name | balance |
+-------+-------------+---------+
|    12 | b1          |    3000 |
|    22 | b2          |    4000 |
|    32 | b3          |    5000 |
|    42 | b4          |    6000 |
|    52 | b5          |    7000 |
+-------+-------------+---------+
5 rows in set (0.00 sec)</pre>


<pre>mysql> insert into customer values
    ->         ("cust1","cstreet1","ccity1"),
    ->         ("cust2","cstreet2","ccity2"),
    ->         ("cust3","cstreet3","ccity3"),
    ->      ("cust4","cstreet4","ccity4"),
    ->      ("cust5","cstreet5","ccity5");

Query OK, 5 rows affected (0.07 sec)
Records: 5  Duplicates: 0  Warnings: 0</pre>


<pre>mysql> select * from customer;
+---------------+-----------------+---------------+
| customer_name | customer_street | customer_city |
+---------------+-----------------+---------------+
| cust1         | cstreet1        | ccity1        |
| cust2         | cstreet2        | ccity2        |
| cust3         | cstreet3        | ccity3        |
| cust4         | cstreet4        | ccity4        |
| cust5         | cstreet5        | ccity5        |
+---------------+-----------------+---------------+
5 rows in set (0.00 sec)</pre>


<pre>mysql> insert into depositor values
    ->         ("cust1",12),
    ->         ("cust2",22),
    ->         ("cust3",32),
    ->         ("cust4",42),
    ->         ("cust5",52);

Query OK, 5 rows affected (0.06 sec)
Records: 5  Duplicates: 0  Warnings: 0</pre>

<pre>mysql> select * from depositor;

+---------------+-------+
| customer_name | accno |
+---------------+-------+
| cust1         |    12 |
| cust2         |    22 |
| cust3         |    32 |
| cust4         |    42 |
| cust5         |    52 |
+---------------+-------+
5 rows in set (0.00 sec)</pre>


<pre>mysql> insert into values loan
    -> (10,"b1",10000),
    -> (20,"b2",20000),
    -> (30,"b3",30000),
    -> (40,"b4",40000),
    -> (50,"b5",50000);

Query OK, 5 rows affected (0.06 sec)
Records: 5  Duplicates: 0  Warnings: 0</pre>

<pre>mysql> select * from loan;

+-------------+-------------+--------+
| loan_number | branch_name | amount |
+-------------+-------------+--------+
|          10 | b1          |  10000 |
|          20 | b2          |  20000 |
|          30 | b3          |  30000 |
|          40 | b4          |  40000 |
|          50 | b5          |  50000 |
+-------------+-------------+--------+
5 rows in set (0.00 sec)</pre>


<pre>mysql> insert into borrower values
    -> ("cust1",10),
    -> ("cust2",20),
    -> ("cust3",30),
    -> ("cust4",40),
    -> ("cust5",50);

Query OK, 5 rows affected (0.05 sec)
Records: 5  Duplicates: 0  Warnings: 0</pre>

<pre>mysql> select * from borrower;

+---------------+-------------+
| customer_name | loan_number |
+---------------+-------------+
| cust1         |          10 |
| cust2         |          20 |
| cust3         |          30 |
| cust4         |          40 |
| cust5         |          50 |
+---------------+-------------+
5 rows in set (0.00 sec)</pre>

<h3 id="queries-">QUERIES:</h3>
<h3 id="iii-find-all-the-customers-who-have-at-least-two-accounts-at-the-main-branch-">iii. Find all the customers who have at least two accounts at the Main branch.</h3>
<pre>mysql> SELECT customer_name FROM depositor d,account a WHERE
     d.accno=a.accno AND a.branch_name='Main'
     GROUP BY d.customer_name HAVING COUNT(d.customer_name)&gt=2;

Empty set (0.00 sec)</pre>


<p>Note:Here we are getting empty set because in our &#39;account&#39; table there is no  branch_name with value &#39;Main&#39; and also there are no customer who has two accounts at the Main branch.So we have to either update the table or else add the proper tuples so that we can get the proper outputs.</p>


<p>updating can be done with the following commands.</p>

<pre>mysql> update account set branch_name='Main' where branch_name="b1";
mysql> update account set branch_name='Main' where branch_name="b2";
mysql> update account set customer_name='cust1' where customer_name="cust2";

+---------------+
| customer_name |
+---------------+
| cust1         |
+---------------+
1 row in set (0.00 sec)</pre>

<p>Description: The query is selecting the customer&#39;s name such that the account number associated with name is in both the account table and depositor table and also the name of the branch in the account table is &#39;Main&#39; and then the tuples are being grouped by customer name in the depositor table and also the customer name having count atleast equal to 2 are being selected.</p>

<h3 id="iv-find-all-the-customers-who-have-an-account-at-all-the-branches-located-in-a-specific-city-">iv. Find all the customers who have an account at all the branches located in a specific city.</h3>
<pre> mysql> SELECT d.customer_name FROM account a,branch b,depositor d WHERE
       b.branch_name=a.branch_name AND a.accno=d.accno AND b.branch_city='c3'
       GROUP BY d.customer_name HAVING COUNT(distinct b.branch_name)=(select count(branch_name) from branch where branch_city='c3');

+---------------+
| customer_name |
+---------------+
| cust3         |
+---------------+
1 row in set (0.00 sec)</pre>

<p>Description: The query selects the customers from the the depositor table such that branch name is in both the branch table and also account table and the account number in the selected tuples is in both account table and in depositor table and also the name of the branch city is &#39;c3&#39;. The selected tuples are gruoped by the customer name of the depositor table whose count should be equal to the count of the branch name in the branch table with brach city &#39;c3&#39;.</p>

<h3 id="v-demonstrate-how-you-delete-all-account-tuples-at-every-branch-located-in-a-specific-city-">v. Demonstrate how you delete all account tuples at every branch located in a specific city.</h3>
<pre>mysql> DELETE FROM account where branch_name IN(SELECT branch_name FROM branch WHERE branch_city='c5');

Query OK, 1 row affected (0.04 sec)

mysql>SELECT * FROM account;


+-------+-------------+---------+
| accno | branch_name | balance |
+-------+-------------+---------+
|    12 | b1          |    3000 |
|    22 | b2          |    4000 |
|    32 | b3          |    5000 |
|    42 | b4          |    6000 |
+-------+-------------+---------+
4 rows in set (0.00 sec)</pre>

<p>Description:The inner query &quot;SELECT branch_name FROM branch WHERE branch_city=&#39;c5&#39; &quot; selects the branch names from the branch table where the branch city is c5. The selected tuples are given as input to the outer query which deletes the tuples with the selected branch names.</p>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="../04_BookDealer/04_BookDealer.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Problem 4: Book dealer"><i class="fa fa-angle-left"></i></a>
        
        
    </div>
</div>

        
<script src="../gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
<script src="../gitbook/app.js"></script>

    
    <script src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
